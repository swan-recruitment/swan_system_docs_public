# Phase 7 – Control Tower Workflow Plan

## Objective
To design and implement the Swan Control Tower: a central orchestration layer for **system monitoring, event handling, and manual interventions**.

## Scope
- Monitor system health: ATS, Firebase, Contractor Portal, Desktop App.
- Collect and validate events in real time.
- Present dashboards and daily digests to Swan staff.
- Enable manual triggers for corrective actions.
- Send alerts when workflows fail.

## Workflow Overview
1. **Event Collection**
   - Sources: ATS webhooks, Firebase Functions, Contractor Portal status.
   - Stored in Firestore (`control_tower/events`).

2. **Validation & Categorisation**
   - All events validated via `event.schema.json`.
   - Categorised as `INFO`, `WARNING`, `ERROR`.

3. **Dashboards**
   - Visual dashboards defined in `dashboards_spec.md`.
   - Daily digest generated by `generate_daily_digest.py`.

4. **Manual Interventions**
   - Staff UI to issue override commands.
   - Commands written into `control_tower/run` (checked against `run.schema.json`).

5. **Alerts**
   - Slack/Email notifications for:
     - Failed jobs
     - Delayed syncs (>24h)
     - Data mismatches

## Deliverables
- Event ingestion pipeline
- Event schemas & validators
- Dashboards + daily digest
- Staff intervention interface
- Alerting rules & escalation process

## Dependencies
- Firebase backend integration
- Contractor Portal realtime updates
- ATS webhook flows
- Control Tower schemas (already drafted)

## Risks
- Over-alerting → staff may ignore warnings
- Schema drift between event and run definitions
- Dependency on reliable webhooks
