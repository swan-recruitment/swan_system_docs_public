<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Swan ERP – Sequence Diagram: Contract Generator Flow</title>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
    .mermaid { max-width: 1200px; }
  </style>
</head>
<body>
  <h1>Swan ERP – Sequence Diagram: Contract Generator Flow</h1>
  <div class="mermaid">
mermaid
sequenceDiagram
    participant CATS as CATSone ATS
    participant WF as Firebase Webhook
    participant CF as Cloud Function (Contract Generator)
    participant FS as Firestore DB
    participant CAT as CATSone API
    participant PORTAL as Contractor Portal
    participant DESKTOP as Desktop App

    CATS->>WF: Candidate Placed Webhook (payload)
    WF->>CF: Trigger Contract Generator
    CF->>FS: Create new Contract document
    CF->>CAT: Upload generated contract to candidate record
    FS-->>PORTAL: Assignment details synced (contract info)
    FS-->>DESKTOP: Contract visible to staff
    CF->>FS: Store binary contract templates
    FS-->>PORTAL: Contractor sees contract metadata
  </div>
  <p style="margin-top:24px;color:#666;">Tip: Open this file locally in a browser. The diagram is rendered by Mermaid via a CDN.</p>
</body>
</html>
